-- MySQL Script generated by MySQL Workbench
-- Thu Oct 29 23:52:23 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `Empresa_BD` ;

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `Empresa_BD`  DEFAULT CHARACTER SET utf8 ;
USE `Empresa_BD`  ;

-- -----------------------------------------------------
-- Table `Personas`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Personas` ;

CREATE TABLE IF NOT EXISTS `Personas` (
  `idPersona` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NOT NULL,
  `apellido` VARCHAR(45) NOT NULL,
  `dni` INT NOT NULL,
  `fechadenacimiento` DATE NOT NULL,
  `edad` INT NOT NULL,
  PRIMARY KEY (`idPersona`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `dni_UNIQUE` ON `Personas` (`dni` ASC) ;


-- -----------------------------------------------------
-- Table `Clientes`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Clientes` ;

CREATE TABLE IF NOT EXISTS `Clientes` (
  `idPersona` INT NOT NULL,
  `tarjetadecredito` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idPersona`),
  CONSTRAINT `fk_Clientes_Personas1`
    FOREIGN KEY (`idPersona`)
    REFERENCES `Personas` (`idPersona`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE UNIQUE INDEX `tarjetadecredito_UNIQUE` ON `Clientes` (`tarjetadecredito` ASC) ;

CREATE INDEX `fk_Clientes_Personas1_idx` ON `Clientes` (`idPersona` ASC) ;


-- -----------------------------------------------------
-- Table `Empleados`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Empleados` ;

CREATE TABLE IF NOT EXISTS `Empleados` (
  `idPersona` INT NOT NULL,
  `legajo` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idPersona`),
  CONSTRAINT `fk_Empleados_Personas`
    FOREIGN KEY (`idPersona`)
    REFERENCES `Personas` (`idPersona`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE UNIQUE INDEX `legajo_UNIQUE` ON `Empleados` (`legajo` ASC) ;

CREATE INDEX `fk_Empleados_Personas_idx` ON `Empleados` (`idPersona` ASC) ;


-- -----------------------------------------------------
-- Table `Productos`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Productos` ;

CREATE TABLE IF NOT EXISTS `Productos` (
  `idProducto` INT NOT NULL AUTO_INCREMENT,
  `nombre` VARCHAR(45) NULL,
  `marco` VARCHAR(45) NOT NULL,
  `fechadevencimiento` DATE NOT NULL,
  `preciounitario` DECIMAL(12,2) NULL,CHECK (`preciounitario` >0 ),
  `imagen` VARCHAR(45) NULL,
  PRIMARY KEY (`idProducto`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Orden`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Orden` ;

CREATE TABLE IF NOT EXISTS `Orden` (
  `codigoorden` INT NOT NULL AUTO_INCREMENT,
  `cliente` INT NOT NULL,
  `vendedor` INT NOT NULL,
  `fechayhora` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`codigoorden`),
  CONSTRAINT `fk_Orden_Clientes1`
    FOREIGN KEY (`cliente`)
    REFERENCES `Clientes` (`idPersona`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Orden_Empleados1`
    FOREIGN KEY (`vendedor`)
    REFERENCES `Empleados` (`idPersona`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Orden_Clientes1_idx` ON `Orden` (`cliente` ASC) ;

CREATE INDEX `fk_Orden_Empleados1_idx` ON `Orden` (`vendedor` ASC) ;


-- -----------------------------------------------------
-- Table `OrdenDelProducto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `OrdenDelProducto` ;

CREATE TABLE IF NOT EXISTS `OrdenDelProducto` (
  `idProducto` INT NOT NULL,
  `codigoorden` INT NOT NULL,
  `cantidad` INT NOT NULL,
  PRIMARY KEY (`idProducto`, `codigoorden`),
  CONSTRAINT `fk_venta_Productos1`
    FOREIGN KEY (`idProducto`)
    REFERENCES `Productos` (`idProducto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OrdenDelProducto_Orden1`
    FOREIGN KEY (`codigoorden`)
    REFERENCES `Orden` (`codigoorden`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_venta_Productos1_idx` ON `OrdenDelProducto` (`idProducto` ASC) ;

CREATE INDEX `fk_OrdenDelProducto_Orden1_idx` ON `OrdenDelProducto` (`codigoorden` ASC) ;


-- -----------------------------------------------------
-- Table `Proveedores`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Proveedores` ;

CREATE TABLE IF NOT EXISTS `Proveedores` (
  `idProveedor` INT NOT NULL AUTO_INCREMENT,
  `Nombre` VARCHAR(45) NULL,
  PRIMARY KEY (`idProveedor`))
ENGINE = InnoDB;

CREATE UNIQUE INDEX `Nombre_UNIQUE` ON `Proveedores` (`Nombre` ASC) ;


-- -----------------------------------------------------
-- Table `Provee`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Provee` ;

CREATE TABLE IF NOT EXISTS `Provee` (
  `idProveedor` INT NOT NULL,
  `idProducto` INT NOT NULL,
  PRIMARY KEY (`idProveedor`,`idProducto`),
  CONSTRAINT `fk_Provee_Proveedores1`
    FOREIGN KEY (`idProveedor`)
    REFERENCES `Proveedores` (`idProveedor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Provee_Productos1`
    FOREIGN KEY (`idProducto`)
    REFERENCES `Productos` (`idProducto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Provee_Proveedores1_idx` ON `Provee` (`idProveedor` ASC) ;

CREATE INDEX `fk_Provee_Productos1_idx` ON `Provee` (`idProducto` ASC) ;


-- -----------------------------------------------------
-- Table `Stock`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Stock` ;

CREATE TABLE IF NOT EXISTS `Stock` (
  `idStock` INT NOT NULL AUTO_INCREMENT,
  `cantidad` INT NOT NULL,
  `estado` DATETIME NOT NULL,
  `idProducto` INT NOT NULL,
  PRIMARY KEY (`idStock`),
  CONSTRAINT `fk_Stock_Productos1`
    FOREIGN KEY (`idProducto`)
    REFERENCES `Productos` (`idProducto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE INDEX `fk_Stock_Productos1_idx` ON `Stock` (`idProducto` ASC) ;


-- -----------------------------------------------------
-- Table `Usuarios`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Usuarios` ;

CREATE TABLE IF NOT EXISTS `Usuarios` (
  `Empleados` INT NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `contraseña` VARCHAR(45) NOT NULL,
  `imagendeperfil` VARCHAR(45) NULL,
  `estado` VARCHAR(45) NOT NULL,CHECK(`estado`  IN('pendiente', 'activo','inactivo')),
  PRIMARY KEY (`Empleados`),
  CONSTRAINT `fk_Usuarios_Empleados1`
    FOREIGN KEY (`Empleados`)
    REFERENCES `Empleados` (`idPersona`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE UNIQUE INDEX `email_UNIQUE` ON `Usuarios` (`email` ASC) ;

CREATE INDEX `fk_Usuarios_Empleados1_idx` ON `Usuarios` (`Empleados` ASC) ;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;



USE `Empresa_BD`;
INSERT INTO `Personas` (`nombre`,`apellido`,`dni`,`fechadenacimiento`,`edad`) VALUES 
('Pablo','Gomez',32564789,'2002-06-01',19),
('Brenda','Ruiz',34564789,'2002-06-01',29),
('Carla','Bernal',35564789,'2002-06-01',39),
('Laura','Guzman',36564789,'2002-06-01',19),
('Luis','Lopez',38564789,'2002-06-01',29),
('Pablo','Arizmendi',22564789,'2002-06-01',59),
('Pablo','Huaman',23564789,'2002-06-01',60),
('Augusto','Paez',24564789,'2002-06-01',100),
('Bruno','Chuw',25564789,'2002-06-01',59),
('Pedro','Labastida',26564789,'2002-06-01',80),
('Luis','Burgos',27564789,'2002-06-01',24),
('Alberto','Gomez Lopez',28564789,'2002-06-01',25);


INSERT INTO `Empleados` (`idPersona`,`legajo`) VALUES 
(1,'AB5874'),
(2,'AC5877'),
(3,'ME8896'),
(4,'AB5875'),
(5,'AD3320'),
(6,'MK1757');


INSERT INTO `Usuarios` (`Empleados`,`email`,`contraseña`,`imagendeperfil`,`estado`) VALUES 
(1,'empleado1@gmail.com','contraseña1','/empleados_imagen/1/1.jpg','activo'),
(2,'empleado2@gmail.com','contraseña2','/empleados_imagen/2/1.jpg','activo'),
(3,'empleado3@gmail.com','contraseña3','/empleados_imagen/3/1.jpg','activo'),
(4,'empleado4@gmail.com','contraseña4','/empleados_imagen/4/1.jpg','activo'),
(5,'empleado5@gmail.com','contraseña5','/empleados_imagen/5/1.jpg','activo'),
(6,'empleado6@gmail.com','contraseña6','/empleados_imagen/6/1.jpg','activo');




INSERT INTO `Clientes` (`idPersona`,`tarjetadecredito`) VALUES 
(7,'4300171049876087'),
(8,'4300171049976087'),
(9,'4300171141576087'),
(10,'4300171040766087'),
(11,'4300171416876087'),
(12,'4300141614176087');




INSERT INTO `Productos` (`nombre`,`marco`,`fechadevencimiento`,`preciounitario`,`imagen`) VALUES 
('Hard disk 1TB','Computacion','2010-06-01',2000,'productos_imagen/1/1.jpg'),
('Desktop Computer','Computacion','2010-06-01',3452,'productos_imagen/2/1.jpg'),
('Memory card 32','Computacion','2010-06-01',2213,'productos_imagen/3/1.jpg'),
('Memory card 128','Computacion','2010-06-01',1234,'productos_imagen/4/1.jpg'),
('keyboard','Computacion','2010-06-01',9873,'productos_imagen/5/1.jpg'),
('keyboard mouse combo','Computacion','2010-06-01',9231,'productos_imagen/6/1.jpg'),
('Wireless keyboard mouse','Computacion','2010-06-01',1242,'productos_imagen/7/1.jpg'),
('Laptop lenovo think pad','Computacion','2010-06-01',3000,'productos_imagen/8/1.jpg'),
('Dell laptop ','Computacion','2010-06-01',342,'productos_imagen/9/1.jpg'),
('hp laptop', 'Computacion','2010-06-01',500,'productos_imagen/10/1.jpg');


INSERT INTO `Orden` (`cliente`,`vendedor`,`fechayhora`) VALUES 
(7,1,DEFAULT),
(8,1,DEFAULT),
(8,1,DEFAULT),
(10,2,DEFAULT),
(11,2,DEFAULT);




INSERT INTO `OrdenDelProducto` (`idProducto`,`codigoorden`,`cantidad`) VALUES 
(1,1,5),
(2,2,1),
(3,3,7),
(7,4,2),
(10,5,2);


INSERT INTO `OrdenDelProducto` (`idProducto`,`codigoorden`,`cantidad`) VALUES 
(2,1,5);
INSERT INTO `OrdenDelProducto` (`idProducto`,`codigoorden`,`cantidad`) VALUES 
(3,1,5);
INSERT INTO `OrdenDelProducto` (`idProducto`,`codigoorden`,`cantidad`) VALUES 
(5,1,5);

INSERT INTO `Proveedores` (`nombre`) VALUES 
('Proveedor de Tecnologia uno');
INSERT INTO `Proveedores` (`nombre`) VALUES 
('Proveedor de Tecnologia dos');


INSERT INTO `Provee` (`idProveedor`,`idProducto`) VALUES 
(1,1),
(1,2),
(1,3),
(1,4),
(1,5),
(1,6),
(1,7),
(1,8),
(1,9),
(1,10);







